
{% extends "ground.html" %}
<!-- {% block title %}Index{% endblock %} -->
{% block head %}
  {{ super() }}
<link rel="stylesheet" href="static/stylesheets/results.css?q={{today}}">
{% endblock %}
{% block content %}

<form>
<h2 onclick="hide_fru_info()">File Eeprom Information</h2>

<div style="display: block;" id="total_body_fru_info" >

<table style="width:100%">
 <col width="150">
 <col width="150">
  <caption></caption>
</table>

<!-- <br></br> -->
<table style="width:100%">
 <col width="150">
 <col width="150">
  <caption></caption>
  <tr>
    <th>File information</th>
    <th>Value</th>
  </tr>
  <tr>
    <td>File Name   </td>
    <td>{{file_name}}</td>
  </tr>
  {% if chassis_info_include == "chassis_info_include" %}
  <tr>
    <th>Chassis Information Area</th>
    <th>Value</th>
  </tr>
  <tr>
    <td>Chassis Type</td>
    <td>{{chassis_type}}</td>
  </tr>
  <tr>
    <td>Chassis Part Number</td>
    <td>{{chassis_part_number}}</td>
  </tr>
  <tr>
    <td>Chassis Serial Number</td>
    <td>{{chassis_serial_number}}</td>
  </tr>
  {% endif %}
  <tr>
    <th>Board Information Area</th>
    <th>Value</th>
  </tr>
  <tr>
    <td>Board Area Version</td>
    <td>{{board_area_ver}}</td>
  </tr>
  <tr>
    <td>Mfg. Date / Time</td>
    <td>{{date}}</td>
  </tr>
  <tr>
    <td>Manufacturer Name</td>
    <td>{{mfg_name}}</td>
  </tr>
  <tr>
    <td>Product Name</td>
    <td>{{product_name}}</td>
  </tr>
 <tr>
    <td>Serial Number</td>
    <td>{{serial_number}}</td>
  </tr>
 <tr>
    <td>Part Number</td>
    <td>{{part_number}}</td>
  </tr>
 <tr>
    <td>FRU File ID</td>
    <td>{{fru_file_id}}</td>
  </tr>  
  {% if product_info_include == "product_info_include" %}
  <tr>
    <th>Product Information Area</th>
    <th>Value</th>
  </tr>
  <tr>
    <td>Manufacturer Name</td>
    <td>{{product_mfg_name}}</td>
  </tr>
  <tr>
    <td>Product Name</td>
    <td>{{produc_product_name}}</td>
  </tr>
 <tr>
    <td>Product Part/Model Number </td>
    <td>{{product_part_number}}</td>
  </tr>
 <tr>
    <td>Product Version</td>
    <td>{{product_product_ver}}</td>
  </tr>
<tr>
    <td>Product Serial Number</td>
    <td>{{product_serial_number}}</td>
  </tr>
 <tr>
    <td>Asset Tag</td>
    <td>{{product_asset_tag}}</td>
  </tr> 
  {% endif %}
  </table>
  </div>

<br></br>
<form action="post"> 
<div style="display: none;">
<input type="text" name="serial_number" value="{{serial_number}}" id="serial_number">
</div>
  <table style="width:100%">
<col width="150">
 <col width="150">
<tr>
<th><button type="submit" formaction="/fru" id="continue" onclick="increse_serial_number()">Continue</button></th>
<th><button type="submit" formaction="/download" id="download">Download</button></th>
</tr>
</table>
</form>
<br></br>

{% if write_fru_switch == "write_fru_en" %}
<form>
<h2 onclick="hide_bmc_info()">BMC Information</h2>
</form>
<br>
<div style="display: block;" id="total_body_bmc_info" >
  <table style="width:100%">
 <col width="200">
 <col width="150">
  <caption></caption>
  <tr>
    <th></th>
    <th></th>
  </tr>

  {% if ping_bmc_output %}
   {% if ping_bmc_code == 0 %}
      <tr>
      <td name="ping">Ping </td>
      <td><p style="color: green;">PASS</p></td>
    </tr> 
    {% else %}
    <tr>
      <td name="ping">Ping </td>
      <td><p style="color: red;">FAIL</p></td>
    </tr> 
    {% endif %}
      <tr>
      <td name="ping">Ping BMC Log</td>
      <td><textarea rows="8" cols="60">{{ping_bmc_output}}</textarea></td>
    </tr> 
  {% endif %}

{% if wri_fru_output %}
   {% if wri_fru_code == 0 %}
      <tr>
      <td name="ping">Write </td>
      <td><p style="color: green;">PASS</p></td>
    </tr> 
    {% else %}
    <tr>
      <td name="ping">Write </td>
      <td><p style="color: red;">FAIL</p></td>
    </tr> 
    {% endif %}
  <tr>
    <td>Write Fru Eeprom Log</td>
    <td><textarea rows="4" cols="60">{{wri_fru_output}}</textarea></td>
  </tr> 
 {% endif %}

  {% if pri_fru_output %}
  {% if pri_fru_code == 0 %}
        <tr>
        <td name="ping">Print </td>
        <td><p style="color: green;">PASS</p></td>
      </tr> 
      {% else %}
      <tr>
        <td name="ping">Print </td>
        <td><p style="color: red;">FAIL</p></td>
      </tr> 
      {% endif %}
  <tr>
    <td name="print_fru">Print Fru Eeprom Log</td>
    <td><textarea rows="15" cols="60">{{pri_fru_output}}</textarea></td>
  </tr> 
   {% endif %}

 {% endif %}
</table>
</div>
<br></br>
<br></br>
</form> 
<script type="text/javascript" src="{{ url_for('static', filename = 'javascript/results.js') }}">

</script>
<script type="text/javascript">
  function increse_serial_number(){
// alert("hehe");
var length_number = 4;
serial_number = document.getElementById('serial_number').value ;
// alert(serial_number);
// alert(number);
for (i=0;i<length_number;i++){

         number = parseInt(serial_number.slice( serial_number.length-i-1,serial_number.length - i)) ;
         // alert(number);
         if(isNaN(number)) {
         // alert("Make sure the 4 last character of serial number is numbers!");
         return false;
         }
      }
number = (parseInt(serial_number.slice( serial_number.length-length_number,serial_number.length)) +1)+"" ;
document.getElementById('serial_number').value = document.getElementById('serial_number').value.slice(0,serial_number.length-number.length) +number;
};
</script>
{% endblock %}